<?xml version="1.0" encoding="ASCII"?>
<pipeline:WorkflowFile xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:pipeline="pipeline" name="souda">
  <on>
    <events eventType="PULL_REQUEST">
      <branches name="dev"/>
    </events>
  </on>
  <jobs name="test" runsOn="ubuntu-latest">
    <needs>build</needs>
    <env key="dockerHubename" value="hamza"/>
    <steps name="Checkout code" uses="actions/checkout@v3"/>
    <steps name="Set up JDK 11" uses="actions/setup-java@v3">
      <with key="java-version" value="11"/>
      <with key="distribution" value="temurin"/>
    </steps>
    <steps name="Run tests" run="mvn test"/>
  </jobs>
  <jobs name="build" runsOn="ubuntu-latest">
    <env key="apikey" value="1414627"/>
    <env key="password" value="$secrets{env.password}"/>
    <steps name="Checkout code" uses="actions/checkout@v3"/>
    <steps name="Set up JDK 11" uses="actions/setup-java@v3">
      <with key="java-version" value="11"/>
      <with key="distribution" value="temurin"/>
    </steps>
    <steps name="Build with Maven" run="mvn clean package -DskipTests"/>
  </jobs>
</pipeline:WorkflowFile>